<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 		"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.pknu.project.user.dao.UserDao">
	<select id="loginCheck" resultType="String" parameterType="String">
		select pass from user where id=#{id}
	</select>
	<select id="emailCheck" resultType="String" parameterType="String">
		select email from user where email=#{email}
	</select>
	<insert id="userInsert" parameterType="user">
		insert into user values(#{id},#{pass},#{name},#{nickName},#{email},#{phoneNumber},#{gender}, false, #{certKey},#{certify})
	</insert> 
	<update id="userUpdate" parameterType="String">
		update user set pass=#{pass},name=#{name},nickName=#{nickName},email=#{email},phoneNumber=#{phoneNumber},gender=#{gender} where id=#{id}
	</update>
	
	<select id="checkJoin" resultType="user" parameterType="String">
 		select * from user where CERTKEY=#{certkey}
 	</select>
 	<update id="checkJoinUpdate" parameterType="String">
		update user set certify=1 where CERTKEY=#{certkey}
	</update>
	<select id="certifyCheck" resultType="int" parameterType="String">
	 	SELECT IFNULL(MAX(CERTIFY),'2') FROM user WHERE ID=#{id}
	 </select>
	 <select id="checkLogin" parameterType="String" resultType="user">
	 	select userNum, pass, certify from user where id = #{id}
	 </select>
	 <select id="isAdminMember" parameterType="int" resultType="boolean">
		select	count(*)
		from	member
		where	groupNum = -1 and userNum = #{userNum};
	</select>
</mapper>