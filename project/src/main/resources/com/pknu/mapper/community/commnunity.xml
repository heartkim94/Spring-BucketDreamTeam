<?xml version="1.0" encoding="UTF-8"?>
<!-- mybatis map 선언 표시 -->
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
              "http://mybatis.org/dtd/mybatis-3-mapper.dtd"> 

<mapper namespace="com.pknu.project.community.dao.CommunityDao">
	<select id="getNoticeCount" resultType="int">
		SELECT COUNT(*) FROM BBS2
	</select>
	
	<select id="getArticles" parameterType="HashMap" resultType="article">
		SELECT articleNum,id,title,depth,hit,
			   to_char(writeDate,'YYYY-MM-DD') as writeDate,fileStatus,commentCount
		FROM (SELECT ROWNUM RM, human.*
								FROM (SELECT BBS2.*,(select count(*)
													 from comments2
													 where bbs2.articleNum=comments2.articleNum	
													) as commentCount 
									  FROM  BBS2 
									  START WITH groupId=0 
									  CONNECT BY PRIOR articleNum=groupId 
									  ORDER SIBLINGS BY articleNum desc) human)  
		WHERE RM BETWEEN #{startRow} and #{endRow}
	</select>
</mapper>