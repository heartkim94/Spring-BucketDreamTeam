<?xml version="1.0" encoding="UTF-8"?>
<!-- mybatis map 선언 표시 -->
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
              "http://mybatis.org/dtd/mybatis-3-mapper.dtd"> 

<mapper namespace="com.pknu.project.group.dao.GroupDao">
	<select id="isAdminMember" parameterType="int" resultType="boolean">
		select	count(*)
		from	`group` g
		join	member m
		on		g.groupNum = m.groupNum
		where	g.groupNum = -1
				and userNum = #{userNum};
	</select>
	<select id="getMyGroup" parameterType="String" resultType="group">
		select	g.*, ifnull(cnt, 0) as memberCount
		from	`group` g
				 left join	member m	on g.groupNum = m.groupNum
				 left join	user u		on m.userNum = u.userNum
				 left join 	(select	groupNum, count(groupNum) as cnt
		           			from	member
		            		group by groupNum) c
		            					on g.groupNum = c.groupNum
		where 	u.id = #{id};
	</select>
</mapper>