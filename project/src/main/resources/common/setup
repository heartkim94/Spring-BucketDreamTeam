drop database project;
create database project;
use project;

-- #Common
-- Board
create table BoardList(
    boardNum int primary key auto_increment,
    boardName varchar(200) not null,
    groupNum int not null);
    
create table FileList(
    fileNum int primary key,
    storedfname varchar(400) not null,
    filelength int not null,
    articleNum int not null,
    boardNum int not null);
    
-- #User
-- table User
CREATE TABLE user(
    userNum int primary key auto_increment,
	id varchar(50) unique,
	pass varchar(50) NOT NULL,
	name varchar(100),
	nickName varchar(100),
	email varchar(100) not null,
	phoneNumber char(13),
	gender enum('m', 'f') not null,
    isAdmin boolean not null default false,
    certkey varchar(100) not null,
	certify int default 0 not null
	);
	
-- #Group
create table `Group`(
    groupNum int primary key auto_increment,
    groupName varchar(200) not null,
    groupOwner int not null,
    catNum int not null);
    
create table Category(
    catNum int primary key auto_increment,
    catName varchar(200) not null,
    parentNum int not null);
    
create table Member(
    groupNum int,
    userNum int,
    primary key(groupNum, userNum));
    
-- #Data for admin
insert into user(userNum, id, pass, name, nickname, email, phoneNumber, gender, certkey, certify)
    values(-1, 'admin', '1234', 'Hong', 'KKong', 'kkong@email','010-1111-1111', 'm', 'test certkey', 1);
insert into Category(catNum, catName, parentNum) values(-1, 'hidden', 0);
insert into `Group`(groupNum, groupName, groupOwner, catNum) values(-1, 'AdminGroup', 1, 1);
insert into Member values(-1, -1);

-- #Table for admin setting
create table AdminBoardSetting(
    boardNum int primary key,
    `show` boolean not null,
    `view` varchar(200) not null
);

insert into AdminBoardSetting values(1, true, 'noticeList');
insert into AdminBoardSetting values(2, true, 'noticeList');
insert into AdminBoardSetting values(3, true, 'community/faq');

-- #Community
insert into BoardList(boardName, groupNum) values('Notice', -1);
create table Board1(
    articleNum int primary key auto_increment,
    id varchar(300) not null,
    title varchar(500) not null,
    content text not null,
    depth int not null,
    hit int not null,
    groupId int not null,
    pos int not null,
    writeDate date not null,
    fileStatus int(1) not null
);

insert into BoardList(boardName, groupNum) values('QnA', -1);
create table Board2(
    articleNum int primary key auto_increment,
    id varchar(300) not null,
    title varchar(500) not null,
    content text not null,
    depth int not null,
    hit int not null,
    groupId int not null,
    pos int not null,
    writeDate date not null,
    fileStatus int(1) not null
);

insert into BoardList(boardName, groupNum) values('FAQ', -1);
create table Board3(
    articleNum int primary key auto_increment,
    id varchar(300) not null,
    title varchar(500) not null,
    content text not null,
    depth int not null,
    hit int not null,
    groupId int not null,
    pos int not null,
    writeDate date not null,
    fileStatus int(1) not null
);

-- #Data for test
-- User
insert into user(id, pass, name, nickname, email, phoneNumber, gender, certkey, certify)
    values('test', '1234', 'Hong', 'KKong', 'kkong@email','010-1111-1111', 'm', 'test certkey', 1);
    
-- Group
insert into Category(catName, parentNum) values('generic', 0);
insert into Category(catName, parentNum) values('philosophy', 0);
insert into Category(catName, parentNum) values('religion', 0);
insert into Category(catName, parentNum) values('bibliography', 1);
insert into Category(catName, parentNum) values('information science', 1);
insert into Category(catName, parentNum) values('encyclopedia', 1);
    
-- Community
-- Notice
insert into Board1(id, title, content, depth, hit, groupId, pos, writeDate, fileStatus)
    values('test', 'test notice article1', 'no content', 0, 0, 1, 0, '2017-11-22', 0);    
insert into Board1(id, title, content, depth, hit, groupId, pos, writeDate, fileStatus)
    values('test', 'test notice article2', 'no content', 0, 0, 2, 0, '2017-11-22', 0);
insert into Board1(id, title, content, depth, hit, groupId, pos, writeDate, fileStatus)
    values('test', 'test notice article3', 'no content', 0, 0, 3, 0, '2017-11-22', 0);
insert into Board1(id, title, content, depth, hit, groupId, pos, writeDate, fileStatus)
    values('test', 'test reply article4', 'no content', 1, 0, 1, 1, '2017-11-22', 0);
insert into Board1(id, title, content, depth, hit, groupId, pos, writeDate, fileStatus)
    values('test', 'test reply article5', 'no content', 1, 0, 1, 3, '2017-11-22', 0);
insert into Board1(id, title, content, depth, hit, groupId, pos, writeDate, fileStatus)
    values('test', 'test reply article6', 'no content', 2, 0, 1, 2, '2017-11-22', 0);
    
-- QnA
insert into Board2(id, title, content, depth, hit, groupId, pos, writeDate, fileStatus)
    values('test', 'test qna article1', 'no content', 0, 0, 1, 0, '2017-11-22', 0);
insert into Board2(id, title, content, depth, hit, groupId, pos, writeDate, fileStatus)
    values('test', 'test qna article2', 'no content', 0, 0, 2, 0, '2017-11-22', 0);
insert into Board2(id, title, content, depth, hit, groupId, pos, writeDate, fileStatus)
    values('test', 'test qna article3', 'no content', 0, 0, 3, 0, '2017-11-22', 0);
insert into Board2(id, title, content, depth, hit, groupId, pos, writeDate, fileStatus)
    values('test', 'test qna article4', 'no content', 0, 0, 4, 0, '2017-11-22', 0);
insert into Board2(id, title, content, depth, hit, groupId, pos, writeDate, fileStatus)
    values('test', 'test qna article5', 'no content', 0, 0, 5, 0, '2017-11-22', 0);
    
-- FAQ
insert into Board3(id, title, content, depth, hit, groupId, pos, writeDate, fileStatus)
    values('test', 'test faq article1', 'no content', 0, 0, 1, 0, '2017-11-22', 0);
insert into Board3(id, title, content, depth, hit, groupId, pos, writeDate, fileStatus)
    values('test', 'test faq article2', 'no content', 0, 0, 2, 0, '2017-11-22', 0);
insert into Board3(id, title, content, depth, hit, groupId, pos, writeDate, fileStatus)
    values('test', 'test faq article3', 'no content', 0, 0, 3, 0, '2017-11-22', 0);
insert into Board3(id, title, content, depth, hit, groupId, pos, writeDate, fileStatus)
    values('test', 'test faq article4', 'no content', 0, 0, 4, 0, '2017-11-22', 0);
insert into Board3(id, title, content, depth, hit, groupId, pos, writeDate, fileStatus)
    values('test', 'test faq article5', 'no content', 0, 0, 5, 0, '2017-11-22', 0);
    
-- QNA게시판에 충분한 양의 데이터 넣기(sql문 자가 복사) - 페이징 처리 테스트용
 insert into Board2(id, title, content, depth, hit, groupId, pos, writeDate, fileStatus)
    (select id, title, content, depth, hit, groupId, pos, writeDate, fileStatus from Board2);